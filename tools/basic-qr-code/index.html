<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Basic QR Code Generator</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
    />
    <style>
      :root {
        color-scheme: light dark;
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        line-height: 1.5;
      }

      body {
        margin: 0;
        background: radial-gradient(circle at top, #f4f6ff 0%, #fdfdff 45%, #f0f2ff 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem 1rem;
      }

      .card {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 16px;
        box-shadow: 0 12px 45px rgba(33, 57, 143, 0.15);
        padding: 2.5rem 2rem;
        max-width: 420px;
        width: 100%;
        backdrop-filter: blur(6px);
      }

      h1 {
        margin-top: 0;
        font-size: clamp(1.7rem, 2vw + 1rem, 2.3rem);
        text-align: center;
        color: #1b2c68;
      }

      .field {
        display: flex;
        flex-direction: column;
        gap: 0.6rem;
        margin-bottom: 1.5rem;
      }

      label {
        font-weight: 600;
        color: #1b2c68;
      }

      textarea {
        resize: vertical;
        min-height: 80px;
        padding: 0.75rem 1rem;
        border-radius: 12px;
        border: 1px solid rgba(30, 64, 175, 0.2);
        font-size: 1rem;
        transition: border 0.2s ease, box-shadow 0.2s ease;
      }

      textarea:focus {
        outline: none;
        border-color: rgba(30, 64, 175, 0.55);
        box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.18);
      }

      .actions {
        display: flex;
        gap: 0.75rem;
        flex-wrap: wrap;
        justify-content: center;
      }

      button {
        border: none;
        border-radius: 999px;
        padding: 0.8rem 1.6rem;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.15s ease, box-shadow 0.15s ease, opacity 0.2s ease;
        background: linear-gradient(135deg, #2449d8, #5566ff);
        color: white;
        box-shadow: 0 10px 24px rgba(36, 73, 216, 0.25);
      }

      button:hover:not(:disabled) {
        transform: translateY(-1px);
        box-shadow: 0 16px 30px rgba(36, 73, 216, 0.3);
      }

      button:disabled {
        cursor: not-allowed;
        opacity: 0.55;
        box-shadow: none;
      }

      #qr-container {
        margin: 1.5rem auto;
        width: fit-content;
        background: white;
        padding: 1rem;
        border-radius: 12px;
        border: 1px solid rgba(17, 24, 39, 0.08);
        min-height: 280px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .placeholder {
        color: rgba(27, 44, 104, 0.5);
        text-align: center;
      }

      footer {
        margin-top: 1.25rem;
        text-align: center;
        font-size: 0.85rem;
        color: rgba(27, 44, 104, 0.6);
      }

      @media (prefers-color-scheme: dark) {
        body {
          background: radial-gradient(circle at top, #141826 0%, #0f172a 45%, #10132b 100%);
        }

        .card {
          background: rgba(15, 23, 42, 0.85);
          box-shadow: 0 12px 45px rgba(0, 0, 0, 0.45);
        }

        h1,
        label {
          color: #dbe4ff;
        }

        textarea {
          background: rgba(15, 23, 42, 0.8);
          color: #f8fafc;
          border: 1px solid rgba(148, 163, 184, 0.25);
        }

        textarea:focus {
          border-color: rgba(129, 140, 248, 0.7);
          box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.25);
        }

        #qr-container {
          background: rgba(15, 23, 42, 0.8);
          border: 1px solid rgba(148, 163, 184, 0.18);
        }

        .placeholder,
        footer {
          color: rgba(203, 213, 225, 0.7);
        }
      }
    </style>
  </head>
  <body>
    <main class="card">
      <h1>Basic QR Code Generator</h1>
      <div class="field">
        <label for="qr-text">Text to encode</label>
        <textarea
          id="qr-text"
          placeholder="Paste a URL, text snippet, or anything you want to encode"
          autofocus
        ></textarea>
      </div>
      <div class="actions">
        <button id="generate">Generate QR Code</button>
        <button id="download" disabled>Download PNG</button>
      </div>
      <div id="qr-container">
        <p class="placeholder">Your QR code will appear here.</p>
      </div>
      <footer>Powered by <a href="https://cdnjs.com/libraries/qrcodejs" target="_blank" rel="noreferrer">QRCode.js</a></footer>
    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script>
      const textInput = document.getElementById("qr-text");
      const generateButton = document.getElementById("generate");
      const downloadButton = document.getElementById("download");
      const qrContainer = document.getElementById("qr-container");
      let qrCodeInstance = null;

      const ensureQrInstance = () => {
        if (!qrCodeInstance) {
          qrCodeInstance = new QRCode(qrContainer, {
            text: "",
            width: 256,
            height: 256,
            colorDark: "#111827",
            colorLight: "#ffffff",
            correctLevel: QRCode.CorrectLevel.H,
          });
        }
      };

      const setDownloadState = (enabled) => {
        downloadButton.disabled = !enabled;
      };

      const updateDownloadButton = () => {
        const canvas = qrContainer.querySelector("canvas");
        if (canvas) {
          setDownloadState(true);
        } else {
          const img = qrContainer.querySelector("img");
          if (!img) {
            setDownloadState(false);
            return;
          }

          const tempCanvas = document.createElement("canvas");
          tempCanvas.width = img.width;
          tempCanvas.height = img.height;
          const context = tempCanvas.getContext("2d");
          context.drawImage(img, 0, 0);
          qrContainer.replaceChildren(tempCanvas);
          setDownloadState(true);
        }
      };

      const clearQr = () => {
        qrContainer.innerHTML = "";
        qrCodeInstance = null;
        setDownloadState(false);
      };

      const renderQr = () => {
        const value = textInput.value.trim();
        if (!value) {
          clearQr();
          qrContainer.innerHTML = '<p class="placeholder">Enter something to generate a QR code.</p>';
          return;
        }

        ensureQrInstance();
        qrCodeInstance.clear();
        qrCodeInstance.makeCode(value);

        requestAnimationFrame(updateDownloadButton);
      };

      generateButton.addEventListener("click", renderQr);
      textInput.addEventListener("keydown", (event) => {
        if (event.key === "Enter" && (event.metaKey || event.ctrlKey)) {
          renderQr();
        }
      });

      downloadButton.addEventListener("click", () => {
        const canvas = qrContainer.querySelector("canvas");
        if (!canvas) {
          setDownloadState(false);
          return;
        }

        const link = document.createElement("a");
        link.href = canvas.toDataURL("image/png");
        link.download = "qr-code.png";
        link.click();
      });
    </script>
  </body>
</html>
